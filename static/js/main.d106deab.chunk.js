(this["webpackJsonppopulation-temperatures"]=this["webpackJsonppopulation-temperatures"]||[]).push([[0],{104:function(t,e,a){},105:function(t,e,a){},107:function(t,e,a){"use strict";a.r(e);var n=a(0),s=a.n(n),i=a(25),o=a.n(i),r=(a(53),a(6)),c=a.n(r),l=a(16),u=a(8),d=a(9),p=a(11),h=a(10),m=(a(55),a(111)),j=a(112),b=a(22),O=a(17),x=a.n(O),f=a(4),g=a(26),v=a(2),y=(a(78),a(19)),w=a.n(y),C={allCitiesData:[],locations:[],unmarkedLocations:[],city:{}},k="LOAD_DATA",_="UPDATE_CITIES",S="UPDATE_LOCATIONS",M="UPDATE_UNMARKED_LOCATIONS",D="SELECT_CITY";var A=a(27),N=a.n(A),L=a(21),z=a.n(L),E=a(20),T=a.n(E),B=a(1),F=function(t){Object(p.a)(a,t);var e=Object(h.a)(a);function a(){var t;return Object(u.a)(this,a),(t=e.call(this)).loadData=function(){var e=Object(l.a)(c.a.mark((function e(a){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({waiting:!0}),e.next=3,x.a.put("/api/temperature-data/seasonal",{name:a});case 3:n=(n=e.sent).data,t.setState({temps:n,waiting:!1});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.state={name:"",temps:[],waiting:!1,override:"\n        ",options:{colors:["#cc3333","#545454","#3333cc"],dataLabels:{enabled:!1},chart:{type:"area",zoom:{type:"x",enabled:!0,autoScaleYaxis:!0},toolbar:{autoSelected:"zoom"}},fill:{type:"none"},stroke:{},xaxis:{type:"datetime",categories:[]},yaxis:{labels:{formatter:function(t){return t.toFixed(0)+"\xb0C"}}},tooltip:{x:{format:"dd/MM/yy"}}}},t}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var t=z.a.parse(this.props.location.search);this.setState({name:t.name}),this.loadData(t.name)}},{key:"render",value:function(){var t=[],e=[],a=[],n=[];this.state.temps.forEach((function(s){t.push(w()(s.location_date).format("l")),e.push(s.temp_max_c),a.push(+s.seasonal),n.push(s.temp_min_c)}));var s=Object(v.a)(Object(v.a)({},this.state.options),{},{xaxis:Object(v.a)(Object(v.a)({},this.state.options),{},{categories:t,tickAmount:10})}),i=[{name:"High",data:e},{name:"Seasonal",data:a},{name:"Low",data:n}];return Object(B.jsxs)("div",{style:{backgroundColor:"white",textAlign:"center"},children:[Object(B.jsx)("br",{}),Object(B.jsx)("h2",{children:this.state.name?"Temperature for "+this.state.name:""}),Object(B.jsx)("br",{}),this.state.waiting?Object(B.jsx)("div",{className:"waiting-spinner",children:Object(B.jsx)(T.a,{color:"#2BC6CB",css:this.state.override,loading:!0,size:20,margin:10})}):Object(B.jsx)(N.a,{options:s,series:i,type:"line",height:550,width:900}),Object(B.jsx)("br",{})]})}}]),a}(n.Component),I=Object(f.f)(F),U=function(t){Object(p.a)(a,t);var e=Object(h.a)(a);function a(){var t;return Object(u.a)(this,a),(t=e.call(this)).loadData=function(){var e=Object(l.a)(c.a.mark((function e(a){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({waiting:!0}),e.next=3,x.a.put("/api/temperature-data/monthly",{name:a});case 3:n=(n=e.sent).data,t.setState({temps:n,waiting:!1});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.state={name:"",temps:[],waiting:!1,override:"\n        ",options:{colors:["#cc3333","#545454","#3333cc"],dataLabels:{enabled:!1},chart:{type:"area",zoom:{type:"x",enabled:!0,autoScaleYaxis:!0},toolbar:{autoSelected:"zoom"}},fill:{type:"none"},stroke:{},xaxis:{type:"datetime",categories:[]},yaxis:{labels:{formatter:function(t){return t.toFixed(0)+"\xb0C"}}},tooltip:{x:{format:"dd/MM/yy"}}}},t}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var t=z.a.parse(this.props.location.search);this.setState({name:t.name}),this.loadData(t.name)}},{key:"render",value:function(){var t=[],e=[],a=[],n=[];this.state.temps.forEach((function(s){t.push(w()(s.location_date).format("MM-YY")),e.push(s.temp_max_c),a.push(s.temp_mean_c),n.push(s.temp_min_c)}));var s=Object(v.a)(Object(v.a)({},this.state.options),{},{xaxis:Object(v.a)(Object(v.a)({},this.state.options),{},{categories:t,tickAmount:10})}),i=[{name:"High",data:e},{name:"Mean",data:a},{name:"Low",data:n}];return Object(B.jsxs)("div",{style:{backgroundColor:"white",textAlign:"center"},children:[Object(B.jsx)("br",{}),Object(B.jsx)("h2",{children:this.state.name?"Temperature for "+this.state.name:""}),Object(B.jsx)("br",{}),this.state.waiting?Object(B.jsx)("div",{className:"waiting-spinner",children:Object(B.jsx)(T.a,{color:"#2BC6CB",css:this.state.override,loading:!0,size:20,margin:10})}):Object(B.jsx)(N.a,{options:s,series:i,type:"line",height:550,width:900}),Object(B.jsx)("br",{})]})}}]),a}(n.Component),Y=Object(f.f)(U),P=a(32),G=a.n(P),H=function(t){Object(p.a)(a,t);var e=Object(h.a)(a);function a(){var t;return Object(u.a)(this,a),(t=e.call(this)).loadData=function(){var e=Object(l.a)(c.a.mark((function e(a){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({waiting:!0}),e.next=3,x.a.put("/api/temperature-data/missing",{name:a});case 3:n=(n=e.sent).data,console.log(n),t.setState({temps:n,waiting:!1}),t.renderMap(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.renderMap=function(e){var a=[],n=[],s=[],i=[],o=[];console.log(e),e.forEach((function(t){a.push(w()(t.location_date).format("l")),n.push(t.temp_max_c),s.push(t.temp_mean_c),i.push(t.temp_min_c),t.projected&&(console.log("projecting"),o.push({x:new Date(t.location_date).getTime(),y:t.temp_min_c,marker:{size:5,fillColor:"#cc8033",strokeColor:"#d18d47",radius:5}}),o.push({x:new Date(t.location_date).getTime(),y:t.temp_mean_c,marker:{size:5,fillColor:"#cc8033",strokeColor:"#d18d47",radius:5}}),o.push({x:new Date(t.location_date).getTime(),y:t.temp_max_c,marker:{size:5,fillColor:"#cc8033",strokeColor:"#d18d47",radius:8},label:{borderColor:"black",text:t.location_date}}))}));var r=[{name:"High",data:n},{name:"Mean",data:s},{name:"Low",data:i}],c=Object(v.a)(Object(v.a)({},t.state.options),{},{xaxis:Object(v.a)(Object(v.a)({},t.state.options.xaxis),{},{categories:a,tickAmount:10}),yaxis:{labels:{formatter:function(t){return t.toFixed(0)+"\xb0C"}}},annotations:{points:o},chart:{height:550,width:900,type:"line",zoom:{type:"x",enabled:!0,autoScaleYaxis:!0},toolbar:{autoSelected:"zoom"}},series:r,title:{text:"Line with Annotations"},labels:a});new G.a(document.querySelector("#chart"),c).render()},t.state={name:"",temps:[],waiting:!1,override:"\n        ",options:{annotations:{points:[{x:"2015-04-11",y:20.569119652,marker:{size:8},label:{borderColor:"#FF4560",text:"Point Annotation"}}]},colors:["#cc3333","#545454","#3333cc"],dataLabels:{enabled:!1},chart:{type:"area",zoom:{type:"x",enabled:!0,autoScaleYaxis:!0},toolbar:{autoSelected:"zoom"}},fill:{type:"none"},stroke:{},xaxis:{type:"datetime",categories:[]},yaxis:{labels:{formatter:function(t){return t.toFixed(0)+"\xb0C"}}},tooltip:{x:{format:"dd/MM/yy"}}}},t}return Object(d.a)(a,[{key:"componentDidMount",value:function(){var t=z.a.parse(this.props.location.search);this.setState({name:t.name}),this.loadData(t.name)}},{key:"render",value:function(){return Object(B.jsxs)("div",{style:{backgroundColor:"white",textAlign:"center"},children:[Object(B.jsx)("br",{}),Object(B.jsx)("h2",{children:this.state.name?"Temperature for "+this.state.name:""}),Object(B.jsx)("br",{}),this.state.waiting?Object(B.jsx)("div",{className:"waiting-spinner",children:Object(B.jsx)(T.a,{color:"#2BC6CB",css:this.state.override,loading:!0,size:20,margin:10})}):Object(B.jsx)("div",{id:"chart"}),Object(B.jsx)("br",{})]})}}]),a}(n.Component),q=Object(f.f)(H),J=function(t){Object(p.a)(a,t);var e=Object(h.a)(a);function a(){var t;return Object(u.a)(this,a),(t=e.call(this)).state={showSeasonal:!0,showMinMaxAvg:!1,showMissing:!1,waiting:!1,override:"\n          display: block;\n          margin: auto auto;\n          border-color: red;\n        "},t}return Object(d.a)(a,[{key:"updateSelected",value:function(t){this.setState(Object(v.a)(Object(v.a)({},{showSeasonal:!1,showMinMaxAvg:!1,showMissing:!1}),{},Object(g.a)({},t,!0)))}},{key:"render",value:function(){var t=this,e=null;return this.state.showSeasonal&&(e=Object(B.jsx)(I,{})),this.state.showMinMaxAvg&&(e=Object(B.jsx)(Y,{})),this.state.showMissing&&(e=Object(B.jsx)(q,{})),Object(B.jsxs)("div",{className:"Graph",children:[Object(B.jsxs)("form",{className:"options",children:[Object(B.jsxs)("div",{className:"input-container",children:[Object(B.jsx)("input",{onChange:function(){return t.updateSelected("showSeasonal")},checked:this.state.showSeasonal,name:"option",type:"radio",id:"min-max-avg",className:"choices"}),Object(B.jsx)("label",{children:"Compare the seasonal average as well as high and low cases"})]}),Object(B.jsxs)("div",{className:"input-container",children:[Object(B.jsx)("input",{onChange:function(){return t.updateSelected("showMinMaxAvg")},checked:this.state.showMinMaxAvg,name:"option",type:"radio",id:"seasonal",className:"choices"}),Object(B.jsx)("label",{children:"View the monthly average, min and max"})]}),Object(B.jsxs)("div",{className:"input-container",children:[Object(B.jsx)("input",{onChange:function(){return t.updateSelected("showMissing")},checked:this.state.showMissing,name:"option",type:"radio",id:"missing-data",className:"choices"}),Object(B.jsx)("label",{children:"See what data is projected."})]})]}),e]})}}]),a}(n.Component);var K=Object(b.b)((function(t){return{city:t.city}}),{selectCity:function(t){return{type:D,payload:t}},loadData:function(t){return{type:k,payload:t}}})(Object(f.f)(J)),R=a(48),V=(a(104),a(24)),W=function(t){Object(p.a)(a,t);var e=Object(h.a)(a);function a(){var t;return Object(u.a)(this,a),(t=e.call(this)).getMapData=Object(l.a)(c.a.mark((function e(){var a,n,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.get("/api/temperature-data/locations");case 2:a=e.sent,n=a.data.data,[],s=n.filter((function(t){return!t.Lat})),n=n.map((function(t){return{markerOffset:25,name:t.name,coordinates:[t.Lon,t.Lat]}})),t.setState({locations:n,unmarkedLocations:s}),t.setState({waiting:!1});case 9:case"end":return e.stop()}}),e)}))),t.selectCity=function(e){t.props.history.push("/graph?name=".concat(e))},t.state={wait:!0,name:"",locations:[],unmarkedLocations:[],override:"\n          display: block;\n          margin: auto auto;\n          border-color: red;\n        ",waiting:!0,geoUrl:"https://raw.githubusercontent.com/zcreativelabs/react-simple-maps/master/topojson-maps/world-110m.json"},t}return Object(d.a)(a,[{key:"componentWillMount",value:function(){this.getMapData()}},{key:"render",value:function(){var t=this,e=Object(R.a)(this.state.locations);return Object(B.jsx)(B.Fragment,{children:this.state.waiting?Object(B.jsx)(T.a,{color:"#2BC6CB",css:this.state.override,loading:!0,size:20,margin:10}):Object(B.jsxs)("div",{style:{width:"100%",height:"100%",position:"relative"},children:[Object(B.jsxs)("select",{onChange:function(e){return t.props.history.push("graph?name=".concat(e.target.value))},defaultValue:"unmarked",className:"no-location-pin",children:[Object(B.jsx)("option",{value:"unmarked",disabled:!0,hidden:!0,children:"Selected an unmarked city"}),this.state.unmarkedLocations.map((function(t){return Object(B.jsx)("option",{value:t.name,children:t.name},t.name)}))]}),Object(B.jsxs)(V.ComposableMap,{style:{background:"#2BC6CB",height:"100%",width:"100%"},projection:"geoAzimuthalEqualArea",projectionConfig:{rotate:[95,-39,0],scale:1300},children:[Object(B.jsx)(V.Geographies,{geography:this.state.geoUrl,children:function(t){return t.geographies.filter((function(t){return"Americas"===t.properties.REGION_UN})).map((function(t){return Object(B.jsx)(V.Geography,{geography:t,fill:"#EAEAEC",stroke:"#D6D6DA"},t.rsmKey)}))}}),e.map((function(e){var a=e.name,n=e.coordinates;e.markerOffset;return Object(B.jsxs)(V.Marker,{coordinates:n,onClick:function(){return t.selectCity(a)},children:[t.state.name===a?Object(B.jsxs)("g",{children:[Object(B.jsx)("rect",{className:t.state.name===a?"city-rect--hover":"city-rect",ry:2}),Object(B.jsx)("text",{className:t.state.name===a?"city-text--hover":"city-text",x:"12",y:"20",left:40,top:4,children:a})]}):null,Object(B.jsx)("circle",{onMouseEnter:function(){return t.setState({name:a})},onMouseLeave:function(){return t.setState({name:""})},className:t.state.name===a?"city-circle--hover":"city-circle",r:10})]},a)}))]})]})})}}]),a}(n.Component),Q=Object(f.f)(W),X=Object(B.jsxs)(f.c,{children:[Object(B.jsx)(f.a,{exact:!0,path:"/",component:Q}),Object(B.jsx)(f.a,{path:"/graph",component:K})]}),Z=(a(105),a.p+"static/media/skylar_capital_management.9dd16507.png"),$=function(t){Object(p.a)(a,t);var e=Object(h.a)(a);function a(){return Object(u.a)(this,a),e.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(B.jsx)("header",{className:"Header",children:Object(B.jsx)("div",{children:Object(B.jsx)("img",{alt:"company logo",className:"logo",src:Z})})})}}]),a}(n.Component),tt=function(t){Object(p.a)(a,t);var e=Object(h.a)(a);function a(){var t;return Object(u.a)(this,a),(t=e.call(this)).refreshData=Object(l.a)(c.a.mark((function t(){var e,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x.a.get("/api/temperature-data");case 2:e=t.sent,a={},e.data.data.forEach((function(t){void 0!==a[t.name]?a[t.name].push(t):a[t.name]=[t]})),console.log(a);case 6:case"end":return t.stop()}}),t)}))),t.state={waiting:!1,temperatureData:[],locations:[]},t}return Object(d.a)(a,[{key:"render",value:function(){var t=this;return Object(B.jsxs)("div",{className:"App",children:[Object(B.jsx)($,{}),Object(B.jsx)("div",{className:"content-body",children:Object(B.jsxs)("div",{className:"map-wrapper",children:[this.props.location.pathname.includes("graph")?Object(B.jsxs)("div",{className:"left-map-infomation",children:[Object(B.jsx)("button",{className:"back",disabled:this.state.waiting,onClick:function(){return t.props.history.push("/")},children:Object(B.jsx)(m.a,{color:"#2BC6CB",size:20})}),Object(B.jsx)("div",{className:"title"})]}):null,X,Object(B.jsx)("button",{disabled:this.state.waiting,onClick:this.refreshData,className:"refresh-circle",children:Object(B.jsx)(j.a,{color:"#2BC6CB",size:20})})]})})]})}}]),a}(n.Component);var et=Object(b.b)((function(t){return{city:t.city}}),{updateCities:function(t){return{type:_,payload:t}},updateLocations:function(t){return{type:S,payload:t}}})(Object(f.f)(tt)),at=a(35),nt=a(47),st=Object(at.a)(nt.a),it=Object(at.b)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,e=arguments.length>1?arguments[1]:void 0;switch(console.log(e),e.type){case k:var a={},n=[],s=[];return e.payload.forEach((function(t){a[t.name]?a[t.name].data.push({projected:t.projected,high:t.temp_max_c,mean:t.temp_mean_c,low:t.temp_min_c,date:w()(t.location_date).format("l")}):(a[t.name]={lon:t.Lon,lat:t.Lat,population:t.population,data:[]},t.population?n.push({markerOffset:25,name:t.name,coordinates:[t.Lon,t.Lat]}):s.push(t.name))})),Object(v.a)(Object(v.a)({},t),{},{allCitiesData:a,locations:n,unmarkedLocations:s});case _:return Object(v.a)(Object(v.a)({},t),{},{allCitiesData:e.payload});case S:return Object(v.a)(Object(v.a)({},t),{},{locations:e.payload});case M:return Object(v.a)(Object(v.a)({},t),{},{unmarkedLocations:e.payload});case D:var i={};for(var o in t.allCitiesData)if(o===e.payload){i=Object(v.a)(Object(v.a)({},t.allCitiesData[o]),{},{name:o});break}return Object(v.a)(Object(v.a)({},t),{},{city:i});default:return t}}),st),ot=a(18),rt=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,113)).then((function(e){var a=e.getCLS,n=e.getFID,s=e.getFCP,i=e.getLCP,o=e.getTTFB;a(t),n(t),s(t),i(t),o(t)}))};o.a.render(Object(B.jsx)(s.a.StrictMode,{children:Object(B.jsx)(b.a,{store:it,children:Object(B.jsx)(ot.a,{children:Object(B.jsx)(et,{})})})}),document.getElementById("root")),rt()},53:function(t,e,a){},55:function(t,e,a){},78:function(t,e,a){}},[[107,1,2]]]);
//# sourceMappingURL=main.d106deab.chunk.js.map